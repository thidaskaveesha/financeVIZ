program name : financeVIZ 
program description : financial vizualisation tool which users can use to get a proper idea 

I need a secured backend in node js. for database I used supabase. 
when you creating the backend you need to think about security. add cors. and backend consist of several main catergories 

1. AUTH 
Auth has 5 endpoints 
i. login 
ii. sign-up
iii. email-verify 
iv. reset-code-generate
v. reset-code-verify

in auth we are using user table 

table definition = '''
create table public.user (
  user_id bigint generated by default as identity not null,
  created_at timestamp with time zone not null,
  username text not null,
  access_token text not null,
  hashed_password text not null,
  salt text not null,
  first_time_login boolean not null,
  subscription_level text not null,
  user_email text not null,
  email_verified boolean not null,
  reset_code bigint null,
  reset_code_expiring_time timestamp with time zone null,
  verify_email_code bigint null,
  verify_email_expiring_time timestamp with time zone null,
  constraint user_pkey primary key (user_id),
  constraint user_id_key unique (user_id),
  constraint user_username_key unique (username)
) TABLESPACE pg_default;
'''
i. sign-up user need to give username, email, password 
once we got that we will going to create random salt and hash password using that salt and hash password will save in table with other data. and access_token need to be create using username + random numbers + random text. length can only be 10characters. and before all of this first find whether given username exsist if exsist we cant create it give error saying username exsist. and check email do the same. 

ii. login user need to give user_name or email and password 
check wheather username or email exsist if yes then get salt encrypt password using that salt and check weather both passwords are matching then return neccessary data. but if email_verified is a false then return a error. else login success with neccessary data jwt or good way so even user edit data it wont be edited i need subscription_level this cannot be edited by frontend. for example if i added this to cookies or session storage user can edit and get not indented beahviours 

iii. email_verify user need to give email. check whether that email is exsist if yes then generate a email send 8 digit random code to that mail. verify_email_expiring_time add 5 minutes from now and save remember this is a timezone timestampz. verify_email_code save given code to this also also if verified then make email_verified in to true. if email exsist then do this. else throw error .

iv. reset-code-generate user need to give username or email then send a mail with 8digit reset code to the email. and save that code to the db and verify_email_code bigint null,
  verify_email_expiring_time timestamp with time zone null, add 5 minute to the current time for expiry. 

v. reset-code-verify user need to give username/email with 8 digit code so if given code is matched with db code then return success else return approprite way. 

to auth use modern approches bloom search algorithms and do best efficient secured approach 